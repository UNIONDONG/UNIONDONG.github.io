---
date: '2024-01-17T21:09:41+08:00'
title:       '一、内存管理的由来及思想'
description: ""
author:      "Donge"
image:       ""
tags:        ["Linux内存管理"]
categories:  ["Tech" ]
weight: 1
---

# Linux内存管理 | 一、内存管理的由来及思想

## 1、前言

<span style="color: red;">**《中庸》有：“九层之台，起于垒土” 之说，那么对于我们搞技术的人，同样如此！**</span>

对于`Linux`内存管理，你可以说没有留意过，但是它存在于我们日常开发的方方面面，你所打开的文件，你所创建的变量，你所运行的程序，无不以此为基础，它可以说是操作系统的基石；只是底层被封装的太好了，以至于我们在做开发的过程中，不需要关心的太多，哪有什么岁月静好，只是有人在负重前行罢了。

&nbsp;

虽然日常开发中涉及的比较少，但是作为一个合格的`Linux`开发者，搞懂内存管理，又显得至关重要，同时也会对嵌入式开发大有脾益，今天我们就来详细聊聊内存管理的那点事。

&nbsp;

该方面的文章，网上也有很多写的非常不错，但是100个人有100种理解方式，并且不同的人，基础不同，理解能力也不同，所以我写这系列的文章，也更有了意义。

&nbsp;

## 2、内存管理的由来

> 为什么要有这个概念呢？

- <span style="color: red;">**首先，内存管理，管理的是个什么东西？**</span>

管理的其实是我们的物理内存，也就是我们的`RAM`空间，在电脑上，表现为我们安装的内存条，有的人装个`4G`的、`8G`的、甚至`64G`的，这些就是实打实的物理空间大小，也就是我们的实际的硬件资源。

![img](https://image-1305421143.cos.ap-nanjing.myqcloud.com/image/u=3890072658,3990799507&fm=253&fmt=auto&app=138&f=JPEG)

- <span style="color: red;">**为什么要进行管理？**</span>

做嵌入式的都知道，像我们刚开始玩的`C51`单片机、`STM32`单片机，我们将程序烧录到`Flash`中后，开机启动后，然后`CPU`会将`Flash`程序加载到`RAM`中，也就是我们的物理内存，随后我们的所有操作都是基于这一个物理内存所进行的。

![img](https://image-1305421143.cos.ap-nanjing.myqcloud.com/image/019f1f0d2d30469cbda2b8fe2cf5e622.png)

**那么此时**：

1.  我们想再次运行一个一模一样的程序怎么办？
2.  即使运行了，那两个程序同时操作了同一个变量，值被错误修改了怎么办？

这些就是`Linux`内存管理要做的事情。

&nbsp;

> 顺便介绍一下 我的圈子：[高级工程师聚集地](https://t.zsxq.com/0eUcTOhdO)，期待大家的加入。

## 3、Linux内存管理思想

**为了解决上面的一些问题，`Linux`采用虚拟内存管理技术。**

1.  `Linux`操作系统抽象出来一个**虚拟地址空间**的概念，供上层用户使用，这么做的目的是为了让多个用户进程，都以为自己独享了内存空间。
2.  而虚拟地址空间与物理地址空间的对应关系，就交给了一个`MMU(Memory Managerment Unit)`的家伙来管理，其主要负责将虚拟内存空间映射到真实的物理地址空间。

![img](https://image-1305421143.cos.ap-nanjing.myqcloud.com/image/72ab76ba697e470b8ceb14d5fc5688d9.png)

这么做的主要目的在于：

1.  让每个进程都拥有相同大小的虚拟地址空间
2.  避免用户直接访问物理内存，导致系统崩溃

这样，我们同时执行多个进程，虽然看起来虚拟地址操作都是相同的，但是通过`MMU`之后，就被映射到了不同的物理地址空间，这样就解决了以上的问题。

&nbsp;

## 4、总结

熟悉了内存管理由来以及其思想，我们可以看出，操作系统的内存管理，主要分为以下几个方面：

1.  **虚拟内存空间管理**：我们抽象出来的虚拟地址空间，该怎么使用，该怎么管理？
2.  **物理内存空间管理**：虚拟地址映射到物理内存空间后，该如何管理，如何分配？
3.  **如何映射**：虚拟内存如何映射到物理内存，是怎么操作的，映射方法有哪些？

下面我们来一一详细探究。

&nbsp;

<center><b> <font color ="blue">欢迎关注【嵌入式艺术】，董哥原创！</font></b></center>
<div align=center><img src="https://image-1305421143.cos.ap-nanjing.myqcloud.com/image/blog.png" alt="img" width = "60%" height ="10%"/>
</div>
